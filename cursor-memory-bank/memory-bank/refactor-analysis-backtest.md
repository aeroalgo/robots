# –ê–Ω–∞–ª–∏–∑ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –º–æ–¥—É–ª—è backtest

## –î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞
2025-01-XX

## –û–±–∑–æ—Ä –º–æ–¥—É–ª—è
–ú–æ–¥—É–ª—å `backtest` —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –¥–≤–∏–∂–æ–∫ –±—ç–∫—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π. –°–æ—Å—Ç–æ–∏—Ç –∏–∑ 4 –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:
- `BacktestEngine` - –æ—Å–Ω–æ–≤–Ω–æ–π –¥–≤–∏–∂–æ–∫
- `FeedManager` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏ –ø–æ —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞–º
- `IndicatorEngine` - —Ä–∞—Å—á–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
- `ConditionEvaluator` - –æ—Ü–µ–Ω–∫–∞ —É—Å–ª–æ–≤–∏–π

## –§–ê–ó–ê 1: –ú–ù–û–ì–û–ú–ï–†–ù–´–ô –ê–ù–ê–õ–ò–ó

### üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

#### –ü—Ä–æ–±–ª–µ–º—ã SOLID –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤

**üî¥ Critical: –ù–∞—Ä—É—à–µ–Ω–∏–µ Single Responsibility Principle (SRP)**
- `BacktestEngine` –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–µ–π:
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–¥–æ–º –¥–∞–Ω–Ω—ã—Ö
  - –†–∞—Å—á–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
  - –û—Ü–µ–Ω–∫–∞ —É—Å–ª–æ–≤–∏–π
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏—è–º–∏
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–∞–º–∏
  - –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫
  - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ equity
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏
- **–í–ª–∏—è–Ω–∏–µ**: –í—ã—Å–æ–∫–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å, —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏

**üü† High: –ù–∞—Ä—É—à–µ–Ω–∏–µ Dependency Inversion Principle (DIP)**
- `BacktestEngine::new()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `container` (—Å—Ç—Ä–æ–∫–∏ 93, 101)
- –ü—Ä—è–º–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤–º–µ—Å—Ç–æ –∏–Ω–≤–µ—Ä—Å–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **–í–ª–∏—è–Ω–∏–µ**: –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–æ–º–ø–∏–ª—è—Ü–∏–∏, —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∂–µ—Å—Ç–∫–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å

**üü° Medium: –ù–∞—Ä—É—à–µ–Ω–∏–µ Open/Closed Principle (OCP)**
- –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ warmup_bars –∂–µ—Å—Ç–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∞ –≤ `BacktestEngine`
- –ù–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –±–µ–∑ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **–í–ª–∏—è–Ω–∏–µ**: –°–ª–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π

#### –ü—Ä–æ–±–ª–µ–º—ã –º–æ–¥—É–ª—å–Ω–æ—Å—Ç–∏

**üü† High: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏**
- `BacktestEngine` –∏ `BacktestExecutor` (–≤ `strategy/executor.rs`) –∏–º–µ—é—Ç —Å—Ö–æ–∂—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–∏–¥–æ–º, –ø–æ–∑–∏—Ü–∏—è–º–∏, –º–µ—Ç—Ä–∏–∫–∞–º–∏
- **–í–ª–∏—è–Ω–∏–µ**: –†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π

**üü° Medium: –°–º–µ—à–∞–Ω–Ω–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**
- `FeedManager` —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–æ–≥–∏–∫—É –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è —Ç–∞–π–º—Ñ—Ä–µ–π–º–æ–≤ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- `IndicatorEngine` —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–æ–≥–∏–∫—É –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
- **–í–ª–∏—è–Ω–∏–µ**: –°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–Ω–∏–º–∞–Ω–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### üìù –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

#### –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å

**üü† High: –°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–µ –º–µ—Ç–æ–¥—ã**
- `BacktestEngine::run()` - 125 —Å—Ç—Ä–æ–∫ (—Å—Ç—Ä–æ–∫–∏ 193-317)
- `BacktestEngine::new()` - 82 —Å—Ç—Ä–æ–∫–∏ (—Å—Ç—Ä–æ–∫–∏ 43-125)
- `FeedManager::step()` - 69 —Å—Ç—Ä–æ–∫ (—Å—Ç—Ä–æ–∫–∏ 74-143)
- **–í–ª–∏—è–Ω–∏–µ**: –°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–Ω–∏–º–∞–Ω–∏—è, –≤—ã—Å–æ–∫–∞—è —Ü–∏–∫–ª–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å

**üü° Medium: –ú–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞**
- `warmup.max(50)` - –∂–µ—Å—Ç–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
- `processed_bars % 10 == 0` - –º–∞–≥–∏—á–µ—Å–∫–æ–µ —á–∏—Å–ª–æ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–µ—Å—Å–∏–∏
- `(cached - current_equity).abs() > 0.01` - –º–∞–≥–∏—á–µ—Å–∫–∏–π –ø–æ—Ä–æ–≥
- **–í–ª–∏—è–Ω–∏–µ**: –°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–Ω–∏–º–∞–Ω–∏—è –Ω–∞–º–µ—Ä–µ–Ω–∏–π

**üü° Medium: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞**
- –ü–æ–≤—Ç–æ—Ä—è—é—â–∞—è—Å—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ —á–µ—Ä–µ–∑ `map_err(BacktestError::Strategy)`
- –ü–æ–≤—Ç–æ—Ä—è—é—â–∞—è—Å—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ª–∏—á–∏—è timeframe –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
- **–í–ª–∏—è–Ω–∏–µ**: –°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏, —Ä–∏—Å–∫ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π

#### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**üü° Medium: –ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
- –°–º–µ—à–µ–Ω–∏–µ `BacktestError::Feed`, `BacktestError::Strategy`, `BacktestError::Position`
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –æ—à–∏–±–∫–∏ —Ç–µ—Ä—è—é—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏
- **–í–ª–∏—è–Ω–∏–µ**: –°–ª–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ª–∞–¥–∫–∏

**üü¢ Low: –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏**
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ `is_err()` –≤–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `ok_or_else()`
- **–í–ª–∏—è–Ω–∏–µ**: –ù–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —É—Ö—É–¥—à–µ–Ω–∏–µ —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏

### ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

#### –í—Ä–µ–º–µ–Ω–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å

**üü† High: –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö**
- `HashMap::with_capacity(bindings_count / 2 + 1)` - –Ω–µ—Ç–æ—á–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –µ–º–∫–æ—Å—Ç–∏
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏—Ç–µ—Ä–∞—Ü–∏–∏ –ø–æ –æ–¥–Ω–∏–º –∏ —Ç–µ–º –∂–µ –∫–æ–ª–ª–µ–∫—Ü–∏—è–º
- **–í–ª–∏—è–Ω–∏–µ**: –õ–∏—à–Ω–∏–µ –∞–ª–ª–æ–∫–∞—Ü–∏–∏ –ø–∞–º—è—Ç–∏

**üü° Medium: –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è**
- 33 –≤—ã–∑–æ–≤–∞ `.clone()` –≤ –º–æ–¥—É–ª–µ backtest
- –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ `TimeFrame` –ø—Ä–∏ –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏
- –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ `IndicatorBindingSpec` –ø—Ä–∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–µ
- **–í–ª–∏—è–Ω–∏–µ**: –õ–∏—à–Ω–∏–µ –∞–ª–ª–æ–∫–∞—Ü–∏–∏, —Å–Ω–∏–∂–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**üü° Medium: –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã**
- `FeedManager::step()` –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–∏—Å–∫ –≤ –≤–µ–∫—Ç–æ—Ä–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞
- `rposition()` –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏–Ω–¥–µ–∫—Å–∞ - O(n) –æ–ø–µ—Ä–∞—Ü–∏—è
- **–í–ª–∏—è–Ω–∏–µ**: –ö–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Ç–∞–π–º—Ñ—Ä–µ–π–º–æ–≤

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏

**üü° Medium: –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ Arc –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è**
- `Arc::clone(&values)` –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ `Arc::new()` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- **–í–ª–∏—è–Ω–∏–µ**: –õ–∏—à–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∏ —Å—Å—ã–ª–æ–∫, –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É—Ç–µ—á–∫–∏

**üü¢ Low: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ equity**
- –õ–æ–≥–∏–∫–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è equity —Å–ª–æ–∂–Ω–∞ –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
- **–í–ª–∏—è–Ω–∏–µ**: –ù–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### ü¶Ä Rust-—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞

#### –ü–∞—Ç—Ç–µ—Ä–Ω—ã –≤–ª–∞–¥–µ–Ω–∏—è –∏ –∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏—è

**üü† High: –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è**
- `frames: HashMap<TimeFrame, QuoteFrame>` –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é
- –ó–∞—Ç–µ–º —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è `HashMap<TimeFrame, Arc<QuoteFrame>>`
- **–í–ª–∏—è–Ω–∏–µ**: –õ–∏—à–Ω–∏–µ –∞–ª–ª–æ–∫–∞—Ü–∏–∏, –ø–æ—Ç–µ—Ä—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**üü° Medium: –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Arc**
- –°–æ–∑–¥–∞–Ω–∏–µ `Arc` –¥–ª—è –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Ç—Ä–µ–±—É—é—Ç —Ä–∞–∑–¥–µ–ª—è–µ–º–æ–≥–æ –≤–ª–∞–¥–µ–Ω–∏—è
- **–í–ª–∏—è–Ω–∏–µ**: –õ–∏—à–Ω–∏–µ –∞–ª–ª–æ–∫–∞—Ü–∏–∏, —É—Å–ª–æ–∂–Ω–µ–Ω–∏–µ –∫–æ–¥–∞

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∞–º–∏ –∂–∏–∑–Ω–∏

**üü¢ Low: –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –≤—Ä–µ–º–µ–Ω–∞–º–∏ –∂–∏–∑–Ω–∏**
- `IndicatorComputationPlan<'a>` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ bindings
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º–æ–π –ø—Ä–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–º —Ö—Ä–∞–Ω–µ–Ω–∏–∏
- **–í–ª–∏—è–Ω–∏–µ**: –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –ø—Ä–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏

#### –î–∏–∑–∞–π–Ω —Ç—Ä–µ–π—Ç–æ–≤

**üü¢ Low: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–π—Ç–æ–≤ –¥–ª—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏**
- –ù–µ—Ç —Ç—Ä–µ–π—Ç–∞ –¥–ª—è `FeedProvider` –∏–ª–∏ `IndicatorCalculator`
- **–í–ª–∏—è–Ω–∏–µ**: –°–ª–æ–∂–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

## –ö–ê–¢–ï–ì–û–†–ò–ó–ê–¶–ò–Ø –ü–†–û–ë–õ–ï–ú –ü–û –°–ï–†–¨–ï–ó–ù–û–°–¢–ò

### üî¥ Critical (—Ç—Ä–µ–±—É—é—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)
1. **–û—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏**: –ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `container` –≤ `BacktestEngine::new()`
2. **–ù–∞—Ä—É—à–µ–Ω–∏–µ SRP**: `BacktestEngine` –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–µ–π

### üü† High (—Ç—Ä–µ–±—É—é—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è)
3. **–ù–∞—Ä—É—à–µ–Ω–∏–µ DIP**: –ü—Ä—è–º–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
4. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏**: `BacktestEngine` –∏ `BacktestExecutor`
5. **–°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–µ –º–µ—Ç–æ–¥—ã**: `run()`, `new()`, `step()`
6. **–ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö**: –ù–µ—Ç–æ—á–Ω—ã–µ –æ—Ü–µ–Ω–∫–∏ –µ–º–∫–æ—Å—Ç–∏

### üü° Medium (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å)
7. **–ò–∑–±—ã—Ç–æ—á–Ω—ã–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è**: 33 –≤—ã–∑–æ–≤–∞ `.clone()`
8. **–ú–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞**: –ñ–µ—Å—Ç–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
9. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞**: –ü–æ–≤—Ç–æ—Ä—è—é—â–∞—è—Å—è –ª–æ–≥–∏–∫–∞
10. **–ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã**: O(n) –ø–æ–∏—Å–∫ –≤ —Ü–∏–∫–ª–µ
11. **–ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –°–º–µ—à–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫

### üü¢ Low (–º–æ–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ)
12. **–ò–∑–±—ã—Ç–æ—á–Ω—ã–µ Arc –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è**: –õ–∏—à–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∏ —Å—Å—ã–ª–æ–∫
13. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ equity**: –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞
14. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–π—Ç–æ–≤**: –ù–µ—Ç –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## –ú–ï–¢–†–ò–ö–ò –ö–ê–ß–ï–°–¢–í–ê

### –¶–∏–∫–ª–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å
- `BacktestEngine::run()`: ~15 (–≤—ã—Å–æ–∫–∞—è)
- `BacktestEngine::new()`: ~8 (—Å—Ä–µ–¥–Ω—è—è)
- `FeedManager::step()`: ~10 (–≤—ã—Å–æ–∫–∞—è)

### –†–∞–∑–º–µ—Ä –º–µ—Ç–æ–¥–æ–≤
- –°—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä –º–µ—Ç–æ–¥–∞: 45 —Å—Ç—Ä–æ–∫
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 125 —Å—Ç—Ä–æ–∫ (`run()`)
- –ú–µ—Ç–æ–¥–æ–≤ > 50 —Å—Ç—Ä–æ–∫: 3

### –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- –ü–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤: 5
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫: ~80

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π: 33
- Arc —Å–æ–∑–¥–∞–Ω–∏–π: 12
- HashMap —Å–æ–∑–¥–∞–Ω–∏–π: 8
