# –ü–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –º–æ–¥—É–ª—è condition

## –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
2025-01-27

## –û–±–∑–æ—Ä
–î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –º–æ–¥—É–ª—è `src/condition/` —Å –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–µ–π –ø—Ä–æ–±–ª–µ–º –∏ —Ä–µ—à–µ–Ω–∏—è–º–∏.

## –ü–†–ò–û–†–ò–¢–ï–¢–´ –†–ï–§–ê–ö–¢–û–†–ò–ù–ì–ê

### üî¥ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

#### 1.1 –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ (TDD –ø–æ–¥—Ö–æ–¥)
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —É—Å–ª–æ–≤–∏–π

**–†–µ—à–µ–Ω–∏–µ**:
- –ù–∞–ø–∏—Å–∞—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö —É—Å–ª–æ–≤–∏–π –ü–ï–†–ï–î —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–æ–º
- –ü–æ–∫—Ä—ã—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏, –≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
- –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è `GreaterPercentCondition`, `LowerPercentCondition`
- –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ (–ø—É—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ, –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö, –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ)

**–®–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**:
1. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è `GreaterPercentCondition`:
   - –¢–µ—Å—Ç —Å –≤–∞–ª–∏–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
   - –¢–µ—Å—Ç —Å –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º percent
   - –¢–µ—Å—Ç —Å –≥—Ä–∞–Ω–∏—á–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø—Ä–æ—Ü–µ–Ω—Ç–∞
2. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è `LowerPercentCondition`:
   - –¢–µ—Å—Ç —Å –≤–∞–ª–∏–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
   - –¢–µ—Å—Ç —Å –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º percent
   - –¢–µ—Å—Ç —Å –≥—Ä–∞–Ω–∏—á–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø—Ä–æ—Ü–µ–Ω—Ç–∞
3. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ –≤—Å–µ—Ö —É—Å–ª–æ–≤–∏–π:
   - –ü—É—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ
   - –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö
   - –û—á–µ–Ω—å –±–æ–ª—å—à–∏–µ –º–∞—Å—Å–∏–≤—ã –¥–∞–Ω–Ω—ã—Ö
   - NaN –∏ Infinity –∑–Ω–∞—á–µ–Ω–∏—è
4. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫:
   - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–∏–ø—ã –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ 85%+, –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç

#### 1.2 –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
**–ü—Ä–æ–±–ª–µ–º–∞**: –°–∏–ª—å–Ω–æ–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–∂–¥—É –ø–æ—Ö–æ–∂–∏–º–∏ —É—Å–ª–æ–≤–∏—è–º–∏

**–í–∞—Ä–∏–∞–Ω—Ç 1: –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—â–∏—Ö helper –º–µ—Ç–æ–¥–æ–≤**
**–ü–ª—é—Å—ã**:
- –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- –õ–µ–≥–∫–æ –ø–æ–Ω—è—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º –∫–æ–¥–µ

**–ú–∏–Ω—É—Å—ã**:
- –í—Å–µ –µ—â–µ –µ—Å—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä–∞—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ –¥–ª—è –≤—Å–µ—Ö —Å–ª—É—á–∞–µ–≤

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–∞–∫—Ä–æ—Å–æ–≤**
**–ü–ª—é—Å—ã**:
- –ü–æ–ª–Ω–æ–µ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- –•–æ—Ä–æ—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–ú–∏–Ω—É—Å—ã**:
- –°–ª–æ–∂–Ω–µ–µ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–Ω–µ–µ —á–∏—Ç–∞–µ–º—ã–º

**–í–∞—Ä–∏–∞–Ω—Ç 3: –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏–µ–π**
**–ü–ª—é—Å—ã**:
- –•–æ—Ä–æ—à–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- –õ–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å
- –°–æ–±–ª—é–¥–µ–Ω–∏–µ DRY –ø—Ä–∏–Ω—Ü–∏–ø–∞

**–ú–∏–Ω—É—Å—ã**:
- –¢—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω–æ –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Å–ª—É—á–∞–µ–≤

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ–¥—Ö–æ–¥**: –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ 1 –∏ 3
- –°–æ–∑–¥–∞—Ç—å –æ–±—â–∏–µ helper –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ `SignalStrength` –∏ —Å–æ–∑–¥–∞–Ω–∏—è `ConditionMetadata`
- –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è –ø–∞—Ä–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π (Above/Below, GreaterPercent/LowerPercent)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å enum –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è

**–®–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**:
1. –°–æ–∑–¥–∞—Ç—å –º–æ–¥—É–ª—å `helpers.rs` —Å –æ–±—â–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏:
   ```rust
   pub fn calculate_signal_strength(diff: f32, thresholds: &[f32]) -> SignalStrength
   pub fn create_condition_metadata(execution_time: Duration, data_points: usize) -> ConditionMetadata
   ```
2. –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è –ø–∞—Ä–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π:
   ```rust
   pub struct ComparisonCondition {
       operator: ComparisonOperator,
       config: ConditionConfig,
   }
   
   enum ComparisonOperator {
       Greater,
       Less,
       GreaterPercent(f32),
       LessPercent(f32),
   }
   ```
3. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å `AboveCondition` –∏ `BelowCondition` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–∞–∑–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
4. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å `GreaterPercentCondition` –∏ `LowerPercentCondition`
5. –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è —Ç—Ä–µ–Ω–¥–æ–≤—ã—Ö —É—Å–ª–æ–≤–∏–π:
   ```rust
   pub struct TrendCondition {
       trend_type: TrendType,
       period: usize,
       config: ConditionConfig,
   }
   
   enum TrendType {
       Rising,
       Falling,
   }
   ```
6. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å `RisingTrendCondition` –∏ `FallingTrendCondition`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ 80%+ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞

#### 1.3 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
**–ü—Ä–æ–±–ª–µ–º–∞**: O(n*m) —Å–ª–æ–∂–Ω–æ—Å—Ç—å –≤ —Ç—Ä–µ–Ω–¥–æ–≤—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö, –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –∞–ª–ª–æ–∫–∞—Ü–∏–∏

**–†–µ—à–µ–Ω–∏–µ –¥–ª—è —Ç—Ä–µ–Ω–¥–æ–≤—ã—Ö —É—Å–ª–æ–≤–∏–π**:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∫–æ–ª—å–∑—è—â–µ–µ –æ–∫–Ω–æ –≤–º–µ—Å—Ç–æ –ø–µ—Ä–µ—Å—á–µ—Ç–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∫–Ω–∞ (–ø–µ—Ä–≤—ã–π –∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç)
- –°–ª–æ–∂–Ω–æ—Å—Ç—å: O(n*m) ‚Üí O(n)

**–†–µ—à–µ–Ω–∏–µ –¥–ª—è –∞–ª–ª–æ–∫–∞—Ü–∏–π**:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `SmallVec` –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –≤–µ–∫—Ç–æ—Ä–æ–≤
- –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –≤—ã–¥–µ–ª—è—Ç—å –ø–∞–º—è—Ç—å —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –µ–º–∫–æ—Å—Ç—å—é
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Arc<ConditionConfig>` –≤–º–µ—Å—Ç–æ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

**–®–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**:
1. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å `RisingTrendCondition::check()`:
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∫–æ–ª—å–∑—è—â–µ–µ –æ–∫–Ω–æ
   - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç –æ–∫–Ω–∞, —Å—á–µ—Ç—á–∏–∫ –≤–æ–∑—Ä–∞—Å—Ç–∞—é—â–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤)
2. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å `FallingTrendCondition::check()`:
   - –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ `RisingTrendCondition`
3. –ó–∞–º–µ–Ω–∏—Ç—å –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ `ConditionConfig` –Ω–∞ `Arc<ConditionConfig>`
4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `SmallVec` –¥–ª—è –≤–µ–∫—Ç–æ—Ä–æ–≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–µ—Å–ª–∏ —Ä–∞–∑–º–µ—Ä < 32)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –£–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ 20-30%

#### 1.4 –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —É—Å–ª–æ–≤–∏–π
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–∞—Ä—É—à–µ–Ω–∏–µ Open/Closed Principle - –Ω—É–∂–Ω–æ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–±—Ä–∏–∫—É –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —É—Å–ª–æ–≤–∏—è

**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å –º–∞–∫—Ä–æ—Å–∞–º–∏ –∏–ª–∏ –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ú–∞–∫—Ä–æ—Å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏**
**–ü–ª—é—Å—ã**:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–±—Ä–∏–∫—É
- –•–æ—Ä–æ—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–ú–∏–Ω—É—Å—ã**:
- –¢—Ä–µ–±—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–∞–∫—Ä–æ—Å–æ–≤
- –ú–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–æ–∂–Ω–µ–µ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å

**–í–∞—Ä–∏–∞–Ω—Ç 2: –°–∏—Å—Ç–µ–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –∞—Ç—Ä–∏–±—É—Ç—ã**
**–ü–ª—é—Å—ã**:
- –ë–æ–ª–µ–µ —è–≤–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- –õ–µ–≥—á–µ –ø–æ–Ω—è—Ç—å
- –ú–æ–∂–Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å

**–ú–∏–Ω—É—Å—ã**:
- –¢—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ –∫–æ–¥–∞
- –ù—É–∂–Ω–æ —è–≤–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —É—Å–ª–æ–≤–∏—è

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ–¥—Ö–æ–¥**: –í–∞—Ä–∏–∞–Ω—Ç 1 —Å –º–∞–∫—Ä–æ—Å–æ–º

**–®–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**:
1. –°–æ–∑–¥–∞—Ç—å –º–∞–∫—Ä–æ—Å `register_condition!`:
   ```rust
   macro_rules! register_condition {
       ($name:ident, $condition_type:ty) => {
           // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ —Ñ–∞–±—Ä–∏–∫–µ
       };
   }
   ```
2. –û–±–Ω–æ–≤–∏—Ç—å `ConditionFactory` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
3. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∞–∫—Ä–æ—Å –∫–æ –≤—Å–µ–º —É—Å–ª–æ–≤–∏—è–º
4. –û–±–Ω–æ–≤–∏—Ç—å —Ç–µ—Å—Ç—ã

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –°–æ–±–ª—é–¥–µ–Ω–∏–µ OCP, –ª–µ–≥–∫–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —É—Å–ª–æ–≤–∏–π

### üü† –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

#### 2.1 –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —É—Å–ª–æ–≤–∏–π –ø–æ —Ñ–∞–π–ª–∞–º
**–ü—Ä–æ–±–ª–µ–º–∞**: `conditions.rs` —Å–æ–¥–µ—Ä–∂–∏—Ç 6 —É—Å–ª–æ–≤–∏–π (861 —Å—Ç—Ä–æ–∫–∞)

**–†–µ—à–µ–Ω–∏–µ**: –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –ø–æ —Ç–∏–ø–∞–º —É—Å–ª–æ–≤–∏–π

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞**:
```
src/condition/
  conditions/
    comparison.rs      # Above, Below
    percentage.rs      # GreaterPercent, LowerPercent
    trend.rs           # RisingTrend, FallingTrend
    mod.rs             # –û–±—ä—è–≤–ª–µ–Ω–∏–µ –º–æ–¥—É–ª–µ–π
```

**–®–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**:
1. –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `conditions/`
2. –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å `AboveCondition` –∏ `BelowCondition` –≤ `comparison.rs`
3. –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å `GreaterPercentCondition` –∏ `LowerPercentCondition` –≤ `percentage.rs`
4. –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å `RisingTrendCondition` –∏ `FallingTrendCondition` –≤ `trend.rs`
5. –û–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã –≤ `factory.rs` –∏ –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–∞—Ö
6. –û–±–Ω–æ–≤–∏—Ç—å `mod.rs`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –£–ª—É—á—à–µ–Ω–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è, –ª—É—á—à–∞—è –º–æ–¥—É–ª—å–Ω–æ—Å—Ç—å

#### 2.2 –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ñ–∞–±—Ä–∏–∫–∏ –∏ —Ä–µ–µ—Å—Ç—Ä–∞
**–ü—Ä–æ–±–ª–µ–º–∞**: `factory.rs` —Å–æ–¥–µ—Ä–∂–∏—Ç –∏ —Ñ–∞–±—Ä–∏–∫—É, –∏ —Ä–µ–µ—Å—Ç—Ä

**–†–µ—à–µ–Ω–∏–µ**: –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –¥–≤–∞ —Ñ–∞–π–ª–∞

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞**:
```
src/condition/
  factory.rs      # ConditionFactory
  registry.rs     # ConditionRegistry
```

**–®–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**:
1. –°–æ–∑–¥–∞—Ç—å `registry.rs` —Å `ConditionRegistry`
2. –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —Ä–µ–µ—Å—Ç—Ä –∏–∑ `factory.rs` –≤ `registry.rs`
3. –û–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã
4. –û–±–Ω–æ–≤–∏—Ç—å `mod.rs`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –°–æ–±–ª—é–¥–µ–Ω–∏–µ SRP, –ª—É—á—à–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞

#### 2.3 –†–∞–∑–±–∏–µ–Ω–∏–µ –¥–ª–∏–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
**–ü—Ä–æ–±–ª–µ–º–∞**: –ú–µ—Ç–æ–¥—ã `check()` —Å–æ–¥–µ—Ä–∂–∞—Ç 70+ —Å—Ç—Ä–æ–∫, –≤—ã—Å–æ–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å

**–†–µ—à–µ–Ω–∏–µ**: –†–∞–∑–±–∏—Ç—å –Ω–∞ –º–µ–Ω—å—à–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏

**–î–ª—è —É—Å–ª–æ–≤–∏–π —Å—Ä–∞–≤–Ω–µ–Ω–∏—è**:
- `calculate_comparison()` - –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
- `calculate_strength()` - —Ä–∞—Å—á–µ—Ç —Å–∏–ª—ã —Å–∏–≥–Ω–∞–ª–∞
- `create_result()` - —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

**–î–ª—è —Ç—Ä–µ–Ω–¥–æ–≤—ã—Ö —É—Å–ª–æ–≤–∏–π**:
- `check_trend()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–µ–Ω–¥–∞ –¥–ª—è –æ–∫–Ω–∞
- `calculate_trend_slope()` - —Ä–∞—Å—á–µ—Ç –Ω–∞–∫–ª–æ–Ω–∞ —Ç—Ä–µ–Ω–¥–∞
- `process_trend_window()` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ–∫–Ω–∞ –¥–∞–Ω–Ω—ã—Ö

**–®–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**:
1. –†–∞–∑–±–∏—Ç—å `AboveCondition::check()` –Ω–∞ –º–µ—Ç–æ–¥—ã
2. –†–∞–∑–±–∏—Ç—å `RisingTrendCondition::check()` –Ω–∞ –º–µ—Ç–æ–¥—ã
3. –†–∞–∑–±–∏—Ç—å `FallingTrendCondition::check()` –Ω–∞ –º–µ—Ç–æ–¥—ã
4. –û–±–Ω–æ–≤–∏—Ç—å —Ç–µ—Å—Ç—ã

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –°–Ω–∏–∂–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –¥–æ 5-7, –¥–ª–∏–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–π < 50 —Å—Ç—Ä–æ–∫

#### 2.4 –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
**–ü—Ä–æ–±–ª–µ–º–∞**: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ rustdoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –¥–ª—è –≤—Å–µ—Ö –ø—É–±–ª–∏—á–Ω—ã—Ö API

**–®–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**:
1. –î–æ–±–∞–≤–∏—Ç—å rustdoc –¥–ª—è trait `Condition`
2. –î–æ–±–∞–≤–∏—Ç—å rustdoc –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä —É—Å–ª–æ–≤–∏–π
3. –î–æ–±–∞–≤–∏—Ç—å rustdoc –¥–ª—è `ConditionFactory`
4. –î–æ–±–∞–≤–∏—Ç—å rustdoc –¥–ª—è `ConditionRegistry`
5. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
6. –î–æ–±–∞–≤–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –º–æ–¥—É–ª—è

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –ü–æ–∫—Ä—ã—Ç–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π 80%+

### üü° –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –£–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞

#### 3.1 –£–ª—É—á—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
**–ü—Ä–æ–±–ª–µ–º–∞**: `unreachable!()` –º–æ–∂–µ—Ç —Å–∫—Ä—ã—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

**–†–µ—à–µ–Ω–∏–µ**: –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ `expect()` —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –∏–ª–∏ —É–ª—É—á—à–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é

**–®–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**:
1. –ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ `unreachable!()` –Ω–∞ `expect()` —Å –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
2. –£–ª—É—á—à–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
3. –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –õ—É—á—à–∞—è –æ—Ç–ª–∞–¥–∫–∞, –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

#### 3.2 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö
**–ü—Ä–æ–±–ª–µ–º–∞**: `ConditionConfig` –∫–ª–æ–Ω–∏—Ä—É–µ—Ç—Å—è, `HashMap` –¥–ª—è `additional_info` —á–∞—Å—Ç–æ –ø—É—Å—Ç–æ–π

**–†–µ—à–µ–Ω–∏–µ**:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Arc<ConditionConfig>` –≤–º–µ—Å—Ç–æ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Option<HashMap>` –∏–ª–∏ `SmallMap` –¥–ª—è `additional_info`

**–®–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**:
1. –ò–∑–º–µ–Ω–∏—Ç—å `ConditionConfig` –Ω–∞ `Arc<ConditionConfig>` –≤ —É—Å–ª–æ–≤–∏—è—Ö
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Option<HashMap>` –¥–ª—è `additional_info`
3. –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –º–µ—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –°–Ω–∏–∂–µ–Ω–∏–µ –∞–ª–ª–æ–∫–∞—Ü–∏–π, —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### 3.3 –£–ª—É—á—à–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Ä–µ–µ—Å—Ç—Ä–∞
**–ü—Ä–æ–±–ª–µ–º–∞**: `OnceLock` –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º–∞—Ç–∏—á–Ω—ã–º –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ**: –°–¥–µ–ª–∞—Ç—å —Ä–µ–µ—Å—Ç—Ä –∏–Ω–∂–µ–∫—Ç–∏—Ä—É–µ–º—ã–º —á–µ—Ä–µ–∑ dependency injection

**–®–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**:
1. –°–æ–∑–¥–∞—Ç—å trait `ConditionRegistryTrait`
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `InMemoryConditionRegistry`
3. –û–±–Ω–æ–≤–∏—Ç—å `ConditionFactory` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è trait
4. –û–±–Ω–æ–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è mock —Ä–µ–µ—Å—Ç—Ä–∞

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –õ—É—á—à–∞—è —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å, –≥–∏–±–∫–æ—Å—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### üü¢ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

#### 4.1 SIMD –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏–π

**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SIMD –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –≠—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω–æ –¥–ª—è —Ç–µ–∫—É—â–∏—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π

#### 4.2 –ú–µ–º–æ–∏–∑–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —É—Å–ª–æ–≤–∏–π

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –≠—Ç–æ –º–æ–∂–µ—Ç —É—Å–ª–æ–∂–Ω–∏—Ç—å –∫–æ–¥ –∏ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## –ü–õ–ê–ù –í–´–ü–û–õ–ù–ï–ù–ò–Ø

### –§–∞–∑–∞ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (TDD)
1. ‚úÖ –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö —É—Å–ª–æ–≤–∏–π –ü–ï–†–ï–î —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–æ–º
2. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã - –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –ø—Ä–æ—Ö–æ–¥–∏—Ç—å
3. ‚úÖ –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

### –§–∞–∑–∞ 2: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
1. –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ (1.2)
2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (1.3)
3. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (1.4)

### –§–∞–∑–∞ 3: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
1. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —É—Å–ª–æ–≤–∏–π –ø–æ —Ñ–∞–π–ª–∞–º (2.1)
2. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ñ–∞–±—Ä–∏–∫–∏ –∏ —Ä–µ–µ—Å—Ç—Ä–∞ (2.2)
3. –†–∞–∑–±–∏–µ–Ω–∏–µ –¥–ª–∏–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π (2.3)
4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (2.4)

### –§–∞–∑–∞ 4: –£–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞
1. –£–ª—É—á—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ (3.1)
2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö (3.2)
3. –£–ª—É—á—à–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Ä–µ–µ—Å—Ç—Ä–∞ (3.3)

### –§–∞–∑–∞ 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 85%+)
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–±–µ–Ω—á–º–∞—Ä–∫–∏)
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

## –ú–ï–¢–†–ò–ö–ò –£–°–ü–ï–•–ê

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
- ‚úÖ –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏: 85%+
- ‚úÖ –¶–∏–∫–ª–∏—á–µ—Å–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å: < 7
- ‚úÖ –î–ª–∏–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–π: < 50 —Å—Ç—Ä–æ–∫
- ‚úÖ –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞: < 10%
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: 80%+
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —É–ª—É—á—à–µ–Ω–∞ –Ω–∞ 20-30%

### –û–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-----|-------|-----------|
| –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ | 60% | 85%+ | +25% |
| –¶–∏–∫–ª–∏—á–µ—Å–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å | 8-10 | 5-7 | -30% |
| –î–ª–∏–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–π | 70+ | 30-50 | -40% |
| –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ | –í—ã—Å–æ–∫–æ–µ | < 10% | –£—Å—Ç—Ä–∞–Ω–µ–Ω–æ |
| –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | 0% | 80%+ | +80% |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –ë–∞–∑–æ–≤—ã–π | –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π | +20-30% |
| –°–æ–±–ª—é–¥–µ–Ω–∏–µ SOLID | –ß–∞—Å—Ç–∏—á–Ω–æ–µ | –ü–æ–ª–Ω–æ–µ | –£–ª—É—á—à–µ–Ω–æ |

## –†–ò–°–ö–ò –ò –ú–ò–¢–ò–ì–ê–¶–ò–Ø

### –†–∏—Å–∫–∏
1. **–†–µ–≥—Ä–µ—Å—Å–∏–∏**: –ò–∑–º–µ–Ω–µ–Ω–∏—è –º–æ–≥—É—Ç —Å–ª–æ–º–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
   - **–ú–∏—Ç–∏–≥–∞—Ü–∏—è**: TDD –ø–æ–¥—Ö–æ–¥, –≤—Å–µ —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è

2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –º–æ–≥—É—Ç —É—Ö—É–¥—à–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
   - **–ú–∏—Ç–∏–≥–∞—Ü–∏—è**: –ë–µ–Ω—á–º–∞—Ä–∫–∏ –¥–æ –∏ –ø–æ—Å–ª–µ, –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ

3. **–°–ª–æ–∂–Ω–æ—Å—Ç—å**: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –º–æ–∂–µ—Ç —É—Å–ª–æ–∂–Ω–∏—Ç—å –∫–æ–¥
   - **–ú–∏—Ç–∏–≥–∞—Ü–∏—è**: –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, —Ä–µ–≤—å—é –∫–æ–¥–∞

4. **–í—Ä–µ–º—è**: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
   - **–ú–∏—Ç–∏–≥–∞—Ü–∏—è**: –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è, —Ñ–∞–∑–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥

## –ó–ê–í–ò–°–ò–ú–û–°–¢–ò

### –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ú–æ–¥—É–ª—å `indicators` (–¥–ª—è `OHLCData`)
- –ú–æ–¥—É–ª—å `strategy` (–¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —É—Å–ª–æ–≤–∏–π)

### –í–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- `thiserror` (–¥–ª—è —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫)
- `std::time::Instant` (–¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è)

## –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:
1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–æ–¥—É–ª–µ–º `strategy`
2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ —É—Å–ª–æ–≤–∏–π (Crossover, Momentum, Volatility)
3. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ —É—Å–ª–æ–≤–∏–π (AND, OR, NOT)
4. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö
