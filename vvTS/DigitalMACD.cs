using System;
using System.Collections.Generic;
using TSLab.Script.Handlers;

namespace vvTSLtools
{
	// Token: 0x02000143 RID: 323
	[HandlerCategory("vvMACD"), HandlerName("Digital MACD")]
	public class DigitalMACD : IDouble2DoubleHandler, IOneSourceHandler, IDoubleReturns, IStreamHandler, IHandler, IDoubleInputs
	{
		// Token: 0x060009F6 RID: 2550 RVA: 0x00029234 File Offset: 0x00027434
		public IList<double> Execute(IList<double> src)
		{
			int count = src.Count;
			double[] array = new double[count];
			for (int i = 65; i < count; i++)
			{
				double num = 0.214984061 * src[i] + 0.2065763732 * src[i - 1] + 0.190372889 * src[i - 2] + 0.1675422436 * src[i - 3] + 0.139705315 * src[i - 4] + 0.1087951881 * src[i - 5] + 0.0768869405 * src[i - 6] + 0.0460244906 * src[i - 7] + 0.0180517395 * src[i - 8] - 0.0055294579 * src[i - 9] - 0.0236660212 * src[i - 10] - 0.0358140055 * src[i - 11] - 0.041949776 * src[i - 12] - 0.042533145 * src[i - 13] - 0.0384279507 * src[i - 14] - 0.0307917433 * src[i - 15] - 0.0209443384 * src[i - 16] - 0.0102335925 * src[i - 17] + 9.32767E-05 * src[i - 18] + 0.0089950015 * src[i - 19] + 0.0157131144 * src[i - 20] + 0.0198149331 * src[i - 21] + 0.0211989019 * src[i - 22] + 0.0200639819 * src[i - 23] + 0.0168532934 * src[i - 24] + 0.0121825067 * src[i - 25] + 0.0067474241 * src[i - 26] + 0.0012444305 * src[i - 27] - 0.0037087682 * src[i - 28] - 0.0076300416 * src[i - 29] - 0.0102110543 * src[i - 30] - 0.0113306266 * src[i - 31] - 0.0110462105 * src[i - 32] - 0.0095662166 * src[i - 33] - 0.0072080453 * src[i - 34] - 0.0043494435 * src[i - 35] - 0.001377197 * src[i - 36] + 0.0013575268 * src[i - 37] + 0.0035760416 * src[i - 38] + 0.0050946166 * src[i - 39] + 0.0058339574 * src[i - 40] + 0.0058160431 * src[i - 41] + 0.0051486631 * src[i - 42] + 0.0039984014 * src[i - 43] + 0.002561938 * src[i - 44] + 0.0010531475 * src[i - 45] - 0.0003481453 * src[i - 46] - 0.0014937154 * src[i - 47] - 0.0022905986 * src[i - 48] - 0.0027000514 * src[i - 49] - 0.002735908 * src[i - 50] - 0.0024543322 * src[i - 51] - 0.0019409837 * src[i - 52] - 0.0012957482 * src[i - 53] - 0.0006179734 * src[i - 54] + 5.7542E-06 * src[i - 55] + 0.0005111297 * src[i - 56] + 0.0008605279 * src[i - 57] + 0.0010441921 * src[i - 58] + 0.0010775684 * src[i - 59] + 0.0009966494 * src[i - 60] + 0.00085373 * src[i - 61] + 0.0007142855 * src[i - 62] + 0.0006599146 * src[i - 63] - 0.0008151017 * src[i - 64];
				double num2 = 0.0825641231 * src[i] + 0.082278308 * src[i - 1] + 0.0814249974 * src[i - 2] + 0.0800166909 * src[i - 3] + 0.0780735197 * src[i - 4] + 0.0756232268 * src[i - 5] + 0.072700974 * src[i - 6] + 0.0693478349 * src[i - 7] + 0.0656105823 * src[i - 8] + 0.0615409157 * src[i - 9] + 0.057193954 * src[i - 10] + 0.0526285643 * src[i - 11] + 0.0479025123 * src[i - 12] + 0.0430785482 * src[i - 13] + 0.038215288 * src[i - 14] + 0.0333706133 * src[i - 15] + 0.028602116 * src[i - 16] + 0.0239614376 * src[i - 17] + 0.0194972056 * src[i - 18] + 0.0152532583 * src[i - 19] + 0.0112682658 * src[i - 20] + 0.0075745482 * src[i - 21] + 0.0041980052 * src[i - 22] + 0.0011588603 * src[i - 23] - 0.0015292889 * src[i - 24] - 0.0038593393 * src[i - 25] - 0.0058303888 * src[i - 26] - 0.0074473108 * src[i - 27] - 0.0087203043 * src[i - 28] - 0.0096645874 * src[i - 29] - 0.0102995666 * src[i - 30] - 0.0106483424 * src[i - 31] - 0.0107374524 * src[i - 32] - 0.0105952115 * src[i - 33] - 0.0102516944 * src[i - 34] - 0.0097377645 * src[i - 35] - 0.0090838346 * src[i - 36] - 0.0083237046 * src[i - 37] - 0.0074804382 * src[i - 38] - 0.0065902734 * src[i - 39] - 0.0056742995 * src[i - 40] - 0.0047554314 * src[i - 41] - 0.0038574209 * src[i - 42] - 0.0029983549 * src[i - 43] - 0.0021924972 * src[i - 44] - 0.0014513858 * src[i - 45] - 0.0007848072 * src[i - 46] - 0.0001995891 * src[i - 47] + 0.0003009728 * src[i - 48] + 0.0007162164 * src[i - 49] + 0.0010478905 * src[i - 50] + 0.0012994016 * src[i - 51] + 0.0014755433 * src[i - 52] + 0.0015824007 * src[i - 53] + 0.0016272598 * src[i - 54] + 0.0016185271 * src[i - 55] + 0.0015648336 * src[i - 56] + 0.0014747659 * src[i - 57] + 0.0013569946 * src[i - 58] + 0.0012193896 * src[i - 59] + 0.0010695971 * src[i - 60] + 0.0009140878 * src[i - 61] + 0.000759154 * src[i - 62] + 0.0016019033 * src[i - 63];
				array[i] = num - num2;
			}
			for (int j = this.SignalMAPeriod; j < count; j++)
			{
				double num3 = 0.0;
				for (int k = 0; k <= this.SignalMAPeriod - 1; k++)
				{
					num3 += array[j - k];
				}
				array[j] = num3 / (double)this.SignalMAPeriod;
			}
			return array;
		}

		// Token: 0x17000343 RID: 835
		[HandlerParameter(true, "5", Min = "3", Max = "20", Step = "1")]
		public int SignalMAPeriod
		{
			// Token: 0x060009F4 RID: 2548 RVA: 0x00029223 File Offset: 0x00027423
			get;
			// Token: 0x060009F5 RID: 2549 RVA: 0x0002922B File Offset: 0x0002742B
			set;
		}
	}
}
